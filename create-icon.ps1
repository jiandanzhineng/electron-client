# 创建一个简单的ICO图标文件
# 由于SVG转ICO比较复杂，我们创建一个基本的ICO文件

# 读取SVG内容并创建一个基本的ICO文件
$icoBytes = @(
    0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x20, 0x20, 0x00, 0x00, 0x01, 0x00, 0x20, 0x00, 0x30, 0x10,
    0x00, 0x00, 0x16, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x40, 0x00,
    0x00, 0x00, 0x01, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
)

# 添加32x32像素的蓝色圆形图标数据
for ($i = 0; $i -lt 1024; $i++) {
    $x = $i % 32
    $y = [math]::Floor($i / 32)
    $centerX = 16
    $centerY = 16
    $radius = 12
    
    $distance = [math]::Sqrt(($x - $centerX) * ($x - $centerX) + ($y - $centerY) * ($y - $centerY))
    
    if ($distance -le $radius) {
        # 蓝色像素 (BGRA格式)
        $icoBytes += @(0xE2, 0x90, 0x4A, 0xFF)  # 蓝色
    } else {
        # 透明像素
        $icoBytes += @(0x00, 0x00, 0x00, 0x00)
    }
}

# 添加AND掩码 (32x32位 = 128字节)
for ($i = 0; $i -lt 128; $i++) {
    $icoBytes += 0x00
}

# 写入文件
[System.IO.File]::WriteAllBytes("e:\develop\electron-client\assets\icon.ico", $icoBytes)

Write-Host "ICO图标文件已创建: assets/icon.ico" -ForegroundColor Green