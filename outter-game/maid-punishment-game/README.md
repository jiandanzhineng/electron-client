# 女仆偷懒惩罚游戏

一个基于硬件设备的踮脚站立惩罚训练游戏，要求目标对象保持踮脚站立姿势，避免脚后跟压下QTZ设备按钮触发电击惩罚。游戏采用实时监控机制，任意按钮按下时立即开始持续电击，两按钮都未按下时停止电击。

## 游戏概述

### 游戏目标
- 在设定的时间内保持踮脚站立
- 避免脚后跟接触地面或压下QTZ设备按钮
- 培养专注力和自律性

### 游戏机制
1. **游戏开始**：如果有自动锁设备则锁定，开始计时（支持手动开启模式）
2. **监控阶段**：QTZ设备实时监控两个按钮状态（button0和button1）
3. **惩罚机制**：任意按钮按下时立即开始持续电击，所有按钮抬起时停止电击
4. **TD01增强**：可选TD01设备在未触发电击一定时间后启动，强度逐渐递增
5. **游戏结束**：时间到达后如果有自动锁设备则自动解锁

## 设备要求

### 设备配置

| 设备类型 | 逻辑ID | 设备名称 | 是否必需 | 作用 |
|---------|--------|----------|----------|------|
| DIANJI | shock_device | 电击设备 | 是 | 执行电击惩罚 |
| QTZ | qtz_sensor | QTZ激光测距传感器 | 是 | 检测脚后跟按钮状态（监控button0和button1） |
| ZIDONGSUO | auto_lock | 自动锁 | 否 | 可选设备，游戏开始时锁定，结束时解锁 |
| TD01 | td01_device | TD01设备 | 否 | 可选设备，在未触发电击一定时间后开启，逐渐增加强度 |

### 设备安装说明

#### QTZ设备安装
- 将QTZ设备放置在脚后跟位置
- 可以穿拖鞋，将设备放在鞋后面
- 确保按钮能够被脚后跟准确触发
- 设备应稳固放置，避免误触发

#### 电击设备安装
- 按照设备说明书正确连接
- 确保电极接触良好
- 检查电压设置是否在安全范围内

#### 自动锁安装（可选）
- 自动锁为可选设备，如果不使用则游戏仍可正常运行
- 如果使用，确保锁定机制正常工作
- 测试开锁和关锁功能
- 确保紧急情况下可以手动解锁
- 如启用手动开启模式，确保设备按键功能正常

#### TD01设备安装（可选）
- TD01设备为可选增强设备
- 按照设备说明书正确连接
- 设备支持0-255强度范围
- 确保设备能够接收power属性设置

## 游戏参数配置

### 基础参数

| 参数名 | 类型 | 范围 | 默认值 | 说明 |
|--------|------|------|--------|------|
| duration | 数字 | 1-360分钟 | 10分钟 | 游戏持续时间 |
| shockIntensity | 数字 | 10-100V | 10V | 电击强度（注意安全，过高可能导致伤害） |
| progressiveIntensity | 布尔 | - | false | 是否启用渐进式强度增加 |
| maxIntensityIncrease | 数字 | 0-50 | 20 | 渐进式强度的最大增幅值 |
| allowUnsafeIntensity | 布尔 | - | false | 是否允许电击强度超过30V安全限度 |
| manualStart | 布尔 | - | false | 是否启用手动开启模式 |

### TD01设备参数

| 参数名 | 类型 | 范围 | 默认值 | 说明 |
|--------|------|------|--------|------|
| td01DelaySeconds | 数字 | 1-60秒 | 5秒 | 未触发电击多少秒后开启TD01设备 |
| td01IntensityIncrease | 数字 | 1-100 | 50 | TD01设备每5秒增加的强度值 |

## 安全注意事项

### ⚠️ 重要警告
- 此游戏涉及电击设备，使用前请确保了解相关风险
- 请在安全的环境中进行，确保有人监督
- 如有心脏病、癫痫等疾病，请勿使用
- 电击强度请从低开始逐渐调整
- 游戏过程中如有不适，请立即停止

### 安全功能
- **紧急停止**：界面提供紧急停止按钮
- **冷却保护**：防止过于频繁的电击
- **强度限制**：电击强度有上限保护
- **时间限制**：游戏有最大时长限制

## 使用指南

### 游戏准备
1. 确保所有设备正常连接并测试
2. 调整游戏参数至合适值
3. 穿着合适的服装和鞋子
4. 确保游戏环境安全
5. 如使用TD01设备，确保设备已正确映射和连接
6. 测试QTZ设备的两个按钮是否能正常触发

### 游戏开始
1. 在游戏配置界面选择"女仆偷懒惩罚游戏"
2. 配置设备映射和游戏参数
3. 点击开始游戏
4. 如果启用手动开启模式，需要点击auto_lock设备按键才开始计时
5. 游戏开始后保持踮脚站立姿势

### 游戏过程
- **正常状态**：保持踮脚，脚后跟不接触按钮，两个按钮都未按下
- **惩罚状态**：任意按钮（button0或button1）按下时立即开始持续电击
- **停止电击**：当两个按钮都未按下时停止电击
- **TD01激活**：如果配置了TD01设备，在未触发电击指定时间后会启动，强度每5秒递增
- **结束状态**：时间到达，自动解锁并显示统计

## 游戏界面说明

### 主界面元素
- **剩余时间**：显示游戏剩余时间
- **电击次数**：累计电击惩罚次数
- **锁定状态**：显示自动锁的当前状态
- **按钮状态**：显示button0和button1的实时状态
- **电击状态**：显示当前是否正在电击
- **TD01状态**：显示TD01设备状态和强度（如果有）
- **进度条**：显示游戏整体进度

### 状态提示
- **绿色**：正常状态，按钮未按下
- **红色**：惩罚状态，正在电击或按钮被按下
- **蓝色**：等待手动开启状态
- **橙色**：TD01设备激活状态

### 手动开启模式说明
当启用手动开启模式时：
1. 游戏加载完成后会显示等待界面
2. 自动锁设备会先锁定
3. 需要点击auto_lock设备的按键来开始游戏计时
4. 系统监听设备发送的`key_clicked`消息
5. 收到信号后游戏正式开始

### TD01设备工作机制
- **延时启动**：在未触发电击指定秒数后自动启动
- **强度递增**：每5秒自动增加设定的强度值
- **最大强度**：支持0-255范围，不受安全限度影响
- **自动停止**：当触发电击时会自动停止并重置
- **状态显示**：界面实时显示TD01的激活状态和当前强度

## 技术实现

### 设备通信
- 使用MQTT协议与硬件设备通信
- 支持设备状态监听和属性设置
- 实现设备事件的实时响应

### 游戏逻辑
- 基于事件驱动的游戏状态管理
- 支持参数化配置和实时调整
- 提供完整的日志记录和状态追踪

### 用户界面
- 响应式设计，适配不同屏幕尺寸
- 实时状态更新和可视化反馈
- 直观的操作界面和状态指示

## 故障排除

### 常见问题

#### 设备连接问题
- **问题**：设备无法连接或响应
- **解决**：检查设备电源、网络连接和MQTT配置

#### 按钮误触发
- **问题**：QTZ设备按钮频繁误触发
- **解决**：调整设备位置，检查安装是否稳固，确保button0和button1都能正常工作

#### 电击强度问题
- **问题**：电击强度过强或过弱
- **解决**：调整shockIntensity参数，从低强度开始测试。注意安全限度设置，如需超过30V请谨慎启用allowUnsafeIntensity

#### 游戏无法结束
- **问题**：游戏时间到了但未自动结束
- **解决**：使用紧急停止按钮，检查自动锁设备状态（如果有的话）

#### 手动开启无响应
- **问题**：启用手动开启模式后点击auto_lock设备无反应
- **解决**：检查自动锁设备是否已正确映射和连接，确认设备能发送`key_clicked`消息。注意：手动开启模式需要自动锁设备支持

#### TD01设备问题
- **问题**：TD01设备无法启动或强度不变化
- **解决**：检查设备映射和连接状态，确认设备支持power属性设置

### 日志查看
- 游戏运行过程中会产生详细日志
- 可在日志查看器中查看设备通信和游戏状态
- 日志级别包括：info、warning、error、debug

## 开发信息

### 文件结构
```
maid-punishment-game/
├── maid-punishment-game.js    # 主游戏逻辑文件
└── README.md                  # 说明文档（本文件）
```

### 版本信息
- **版本**：1.4.0
- **作者**：游戏设计师
- **创建日期**：2024年
- **最后更新**：2024年

### 更新日志
- **v1.4.0**：新增玩法介绍文档，优化宣传材料
- **v1.3.0**：新增TD01设备支持、手动开启模式、实时电击机制
- **v1.2.x**：优化UI界面、增加安全限度设置
- **v1.1.x**：增加渐进式强度功能
- **v1.0.0**：初始版本

### 依赖要求
- Electron客户端环境
- MQTT设备管理器
- 支持的硬件设备（ZIDONGSUO、DIANJI、QTZ、TD01可选）
- 游戏UI API支持

## 许可证

本游戏仅供学习和研究使用，使用者需自行承担使用风险。

---

**免责声明**：本游戏涉及电击设备，使用前请充分了解相关风险。开发者不对因使用本游戏造成的任何损害承担责任。请在专业人士指导下安全使用。