# å¯¸æ­¢ç©æ³•æ¸¸æˆ

ä¸€ä¸ªåŸºäºæ°”å‹ä¼ æ„Ÿå™¨çš„å¯¸æ­¢è®­ç»ƒæ¸¸æˆï¼Œé€šè¿‡æ£€æµ‹æ‹¬çº¦è‚Œå‹åŠ›å˜åŒ–ï¼Œç»“åˆåè½´ç”µæœºæ§åˆ¶å™¨å’Œç”µå‡»è®¾å¤‡è¿›è¡Œæ™ºèƒ½åˆºæ¿€æ§åˆ¶ã€‚

## æ¸¸æˆæ¦‚è¿°

### æ¸¸æˆç›®æ ‡
- é€šè¿‡æ°”å‹ä¼ æ„Ÿå™¨ç›‘æµ‹æ‹¬çº¦è‚Œå‹åŠ›
- æ ¹æ®å‹åŠ›å˜åŒ–æ™ºèƒ½è°ƒèŠ‚åˆºæ¿€å¼ºåº¦
- å®ç°å¯¸æ­¢è®­ç»ƒæ•ˆæœ

### æ¸¸æˆæœºåˆ¶
1. **å‹åŠ›ç›‘æµ‹**ï¼šæ°”å‹ä¼ æ„Ÿå™¨å®æ—¶æ£€æµ‹æ‹¬çº¦è‚Œå‹åŠ›å˜åŒ–
2. **æ™ºèƒ½è°ƒèŠ‚**ï¼šå‹åŠ›é«˜æ—¶é™ä½åˆºæ¿€ï¼Œå‹åŠ›ä½æ—¶å¢å¼ºåˆºæ¿€
3. **ç”µå‡»è­¦ç¤º**ï¼šå‹åŠ›è¶…è¿‡ä¸´ç•Œå€¼æ—¶è§¦å‘ç”µå‡»ä½¿ç”¨æˆ·æ¸…é†’
4. **å»¶è¿Ÿå¯åŠ¨**ï¼šå‹åŠ›ä½æ—¶å»¶è¿Ÿä¸€æ®µæ—¶é—´åæ‰å¼€å§‹ç¼“æ…¢åˆºæ¿€
5. **åŠ¨æ€å¹³è¡¡**ï¼šç»´æŒåœ¨ä¸´ç•Œå‹åŠ›é™„è¿‘çš„å¹³è¡¡çŠ¶æ€

## è®¾å¤‡è¦æ±‚

### è®¾å¤‡é…ç½®

| è®¾å¤‡ç±»å‹ | é€»è¾‘ID | è®¾å¤‡åç§° | æ˜¯å¦å¿…éœ€ | ä½œç”¨ |
|---------|--------|----------|----------|------|
| QIYA | pressure_sensor | æ°”å‹ä¼ æ„Ÿå™¨ | æ˜¯ | æ£€æµ‹æ‹¬çº¦è‚Œå‹åŠ›å˜åŒ– |
| TD01 | motor_controller | åè½´ç”µæœºæ§åˆ¶å™¨ | æ˜¯ | æä¾›å¯è°ƒèŠ‚å¼ºåº¦çš„åˆºæ¿€ |
| DIANJI | shock_device | ç”µå‡»è®¾å¤‡ | å¦ | å‹åŠ›è¿‡é«˜æ—¶çš„è­¦ç¤ºç”µå‡» |
| ZIDONGSUO | auto_lock | è‡ªåŠ¨é”è®¾å¤‡ | å¦ | æ¸¸æˆå¼€å§‹æ—¶é”å®šï¼Œç»“æŸæ—¶è§£é” |

## æ¸¸æˆå‚æ•°é…ç½®

### åŸºç¡€å‚æ•°

| å‚æ•°å | ç±»å‹ | èŒƒå›´ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| duration | æ•°å­— | 1-120åˆ†é’Ÿ | 20åˆ†é’Ÿ | æ¸¸æˆæŒç»­æ—¶é—´ |
| criticalPressure | æ•°å­— | 0-40kPa | 20kPa | ä¸´ç•Œæ°”å‹å€¼ |
| maxMotorIntensity | æ•°å­— | 1-255 | 200 | TD01æœ€å¤§å¼ºåº¦ |

### åˆºæ¿€æ§åˆ¶å‚æ•°

| å‚æ•°å | ç±»å‹ | èŒƒå›´ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| lowPressureDelay | æ•°å­— | 1-30ç§’ | 5ç§’ | å‹åŠ›ä½æ—¶å»¶è¿Ÿåˆºæ¿€æ—¶é—´ |
| stimulationRampRateLimit | æ•°å­— | 1-50 | 10 | åˆºæ¿€å¼ºåº¦é€’å¢é€Ÿç‡é™åˆ¶ï¼ˆæ¯så˜åŒ–ä¸è¶…è¿‡æ­¤å€¼ï¼‰ |
| pressureSensitivity | æ•°å­— | 0.1-5.0 | 1.0 | å‹åŠ›å˜åŒ–æ•æ„Ÿåº¦ç³»æ•° |
| stimulationRampRandomPercent | æ•°å­— | 0-100% | 0% | åˆºæ¿€å¼ºåº¦éšæœºæ‰°åŠ¨ç™¾åˆ†æ¯” |

### ç”µå‡»å‚æ•°

| å‚æ•°å | ç±»å‹ | èŒƒå›´ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| shockIntensity | æ•°å­— | 10-100V | 20V | ç”µå‡»å¼ºåº¦ |
| shockDuration | æ•°å­— | 0.5-5ç§’ | 1ç§’ | ç”µå‡»æŒç»­æ—¶é—´ |

## çŠ¶æ€è½¬ç§»å›¾

```mermaid
flowchart TD
    A[æ¸¸æˆå¼€å§‹] --> B[åˆå§‹åŒ–è®¾å¤‡]
    B --> C[å¼€å§‹å‹åŠ›ç›‘æµ‹]
    C --> D{æ£€æµ‹å‹åŠ›å¹¶åˆ¤æ–­}
    
    D -->|å‹åŠ› > ä¸´ç•Œå€¼| E[TD01å¼ºåº¦è®¾ä¸º0]
    E --> F[è§¦å‘ç”µå‡»è­¦ç¤º]
    F --> G[ç­‰å¾…å†·å´æ—¶é—´]
    G --> D
    
    D -->|å‹åŠ› < ä¸´ç•Œå€¼| H[è®¡ç®—å‹åŠ›å·®å€¼]
    H --> I[ç­‰å¾…å»¶è¿Ÿæ—¶é—´]
    I --> J[æ ¹æ®å‹åŠ›å·®è®¾ç½®TD01å¼ºåº¦]
    J --> K[ç¼“æ…¢é€’å¢åˆºæ¿€]
    K --> D
```

## ç®—æ³•é€»è¾‘

### å‹åŠ›-å¼ºåº¦æ˜ å°„ç®—æ³•
```
if (currentPressure >= criticalPressure) {
    motorIntensity = 0
    triggerShock()
} else if (currentPressure < criticalPressure) {
    pressureDiff = criticalPressure - currentPressure
    targetIntensity = (pressureDiff / criticalPressure) * maxMotorIntensity
    
    // å»¶è¿Ÿå¯åŠ¨æœºåˆ¶ï¼Œåˆºæ¿€å¼ºåº¦æ¸å˜ï¼Œåˆºæ¿€å¼ºåº¦éšæœºæ‰°åŠ¨
}
```

### å®‰å…¨æœºåˆ¶
- ç”µå‡»è®¾å¤‡å…·æœ‰æœ€å¤§è§¦å‘é¢‘ç‡é™åˆ¶
- TD01å¼ºåº¦å˜åŒ–é‡‡ç”¨æ¸å˜æ¨¡å¼ï¼Œé¿å…çªç„¶å˜åŒ–

## æ¸¸æˆç•Œé¢è¯´æ˜

### ä¸»ç•Œé¢å…ƒç´ 
- **å½“å‰å‹åŠ›**ï¼šå®æ—¶æ˜¾ç¤ºæ°”å‹ä¼ æ„Ÿå™¨è¯»æ•°
- **ä¸´ç•Œå‹åŠ›çº¿**ï¼šæ˜¾ç¤ºè®¾å®šçš„ä¸´ç•Œå‹åŠ›å€¼
- **TD01å¼ºåº¦**ï¼šå½“å‰ç”µæœºæ§åˆ¶å™¨è¾“å‡ºå¼ºåº¦
- **å‰©ä½™æ—¶é—´**ï¼šæ¸¸æˆå‰©ä½™æ—¶é—´
- **å‹åŠ›æ›²çº¿å›¾**ï¼šå®æ—¶å‹åŠ›å˜åŒ–è¶‹åŠ¿
- **è®¾å¤‡çŠ¶æ€**ï¼šå„è®¾å¤‡è¿æ¥å’Œå·¥ä½œçŠ¶æ€

### çŠ¶æ€æŒ‡ç¤º
- ğŸŸ¢ å‹åŠ›æ­£å¸¸ï¼šç»¿è‰²æŒ‡ç¤ºç¯
- ğŸŸ¡ å‹åŠ›åä½ï¼šé»„è‰²æŒ‡ç¤ºç¯  
- ğŸ”´ å‹åŠ›è¿‡é«˜ï¼šçº¢è‰²æŒ‡ç¤ºç¯
- âš¡ ç”µå‡»è§¦å‘ï¼šé—ªçƒçº¢è‰²è­¦ç¤º

## å¼€å‘ä¿¡æ¯

### ç‰ˆæœ¬å†å²
- v1.0.0ï¼šåŸºç¡€åŠŸèƒ½å®ç°

### æŠ€æœ¯ç‰¹ç‚¹
- å®æ—¶å‹åŠ›ç›‘æµ‹å’Œå“åº”
- æ™ºèƒ½åˆºæ¿€å¼ºåº¦è°ƒèŠ‚ç®—æ³•
- å¤šé‡å®‰å…¨ä¿æŠ¤æœºåˆ¶
- ç›´è§‚çš„å¯è§†åŒ–ç•Œé¢